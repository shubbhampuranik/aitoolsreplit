<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    
    <!-- Primary SEO Meta Tags -->
    <title>AI Community Portal - Discover the Best AI Tools, Prompts & Resources</title>
    <meta name="title" content="AI Community Portal - Discover the Best AI Tools, Prompts & Resources" />
    <meta name="description" content="Discover and review the best AI tools, prompts, courses, and models. Join our community of AI enthusiasts and professionals to find the perfect AI solutions for your needs." />
    <meta name="keywords" content="AI tools, artificial intelligence, AI prompts, AI courses, AI models, machine learning, AI community, AI reviews, AI marketplace" />
    <meta name="author" content="AI Community Portal" />
    <meta name="robots" content="index, follow" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://ai-community-portal.replit.app/" />
    <meta property="og:title" content="AI Community Portal - Discover the Best AI Tools, Prompts & Resources" />
    <meta property="og:description" content="Discover and review the best AI tools, prompts, courses, and models. Join our community of AI enthusiasts and professionals." />
    <meta property="og:image" content="https://ai-community-portal.replit.app/og-image.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="AI Community Portal" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://ai-community-portal.replit.app/" />
    <meta property="twitter:title" content="AI Community Portal - Discover the Best AI Tools, Prompts & Resources" />
    <meta property="twitter:description" content="Discover and review the best AI tools, prompts, courses, and models. Join our community of AI enthusiasts and professionals." />
    <meta property="twitter:image" content="https://ai-community-portal.replit.app/og-image.png" />
    
    <!-- Additional SEO -->
    <link rel="canonical" href="https://ai-community-portal.replit.app/" />
    <meta name="theme-color" content="#2563eb" />
    <link rel="sitemap" type="application/xml" href="/sitemap.xml" />
    <link rel="robots" href="/robots.txt" />
    <link rel="stylesheet" href="styles.css" />
    
    <!-- Structured Data for Organization -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "AI Community Portal",
      "description": "A comprehensive platform for discovering and reviewing AI tools, prompts, courses, and models",
      "url": "https://ai-community-portal.replit.app/",
      "logo": "https://ai-community-portal.replit.app/logo.png",
      "sameAs": []
    }
    </script>
    
    <!-- Structured Data for Website -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "AI Community Portal",
      "url": "https://ai-community-portal.replit.app/",
      "description": "Discover and review the best AI tools, prompts, courses, and models",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://ai-community-portal.replit.app/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    
    <!-- Structured Data for ItemList (Tools) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "ItemList",
      "name": "AI Tools Directory",
      "description": "Comprehensive directory of AI tools and software",
      "url": "https://ai-community-portal.replit.app/tools",
      "numberOfItems": 50
    }
    </script>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <a href="/" class="logo">AI Community Portal</a>
        
        <nav class="nav-links" role="navigation" aria-label="Main navigation">
          <a href="/tools">Tools</a>
          <a href="/prompts">Prompts</a>
          <a href="/courses">Courses</a>
          <a href="/jobs">Jobs</a>
        </nav>
        
        <div class="search-bar">
          <input type="text" class="search-input" id="search-input" placeholder="Search anything...">
          <span class="search-icon">🔍</span>
        </div>
        
        <div class="auth-buttons">
          <a href="/auth" class="btn btn-ghost">Sign In</a>
          <a href="/auth" class="btn btn-primary">Sign Up</a>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <div class="main-layout">
      <!-- Left Sidebar -->
      <aside class="sidebar" role="complementary" aria-label="Navigation sidebar">
        <div class="sidebar-section">
          <h3>Community Feed</h3>
          <div class="feed-filters">
            <a href="#" class="feed-filter active" onclick="filterFeed('all')">🔥 For You</a>
            <a href="#" class="feed-filter" onclick="filterFeed('tools')">🛠️ Tools</a>
            <a href="#" class="feed-filter" onclick="filterFeed('prompts')">💭 Prompts</a>
            <a href="#" class="feed-filter" onclick="filterFeed('news')">📰 News</a>
          </div>
        </div>
        
        <div class="sidebar-section">
          <h3>Categories</h3>
          <div class="category-filters">
            <a href="#" class="category-filter">🔧 Productivity</a>
            <a href="#" class="category-filter">✍️ Writing</a>
            <a href="#" class="category-filter">🎨 Design</a>
            <a href="#" class="category-filter">👨‍💻 Development</a>
            <a href="#" class="category-filter">💼 Business</a>
            <a href="#" class="category-filter">📈 Marketing</a>
          </div>
        </div>
        
        <div class="sidebar-section">
          <h3>AI Recommendations</h3>
          <div class="category-filters">
            <a href="#" class="category-filter">🧠 Based on your interests</a>
          </div>
        </div>
      </aside>

      <!-- Main Feed -->
      <main class="feed-content" role="main" aria-label="Main content feed">
        <div class="feed-header">
          <div class="sort-tabs" role="tablist" aria-label="Sort options">
            <button class="sort-tab active" onclick="setSortOrder('hot')">🔥 Hot</button>
            <button class="sort-tab" onclick="setSortOrder('new')">📅 New</button>
            <button class="sort-tab" onclick="setSortOrder('top')">🏆 Top</button>
          </div>
        </div>
        
        <div class="feed-items" id="feed-items">
          <div class="loading-state">Loading amazing AI tools...</div>
        </div>
      </main>

      <!-- Right Sidebar -->
      <aside class="right-sidebar" role="complementary" aria-label="Community information">
        <div class="sidebar-widget">
          <h3>Community Stats</h3>
          <div class="stats-grid" id="community-stats">
            <div class="stat-item">
              <span class="stat-number">50</span>
              <span class="stat-label">AI Tools</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">50</span>
              <span class="stat-label">Prompts</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">30</span>
              <span class="stat-label">Courses</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">100</span>
              <span class="stat-label">Jobs</span>
            </div>
          </div>
        </div>
        
        <div class="sidebar-widget">
          <div class="widget-header">
            <h3>📋 Latest Jobs</h3>
            <a href="/jobs" class="view-all-link">View All</a>
          </div>
          <div class="jobs-list" id="jobs-list">
            <div class="job-item">
              <div class="job-title">AI Engineer</div>
              <div class="job-company">OpenAI • San Francisco</div>
              <div class="job-salary">$150k-200k</div>
            </div>
            <div class="job-item">
              <div class="job-title">ML Research Scientist</div>
              <div class="job-company">Google DeepMind • London</div>
              <div class="job-salary">£80k-120k</div>
            </div>
            <div class="job-item">
              <div class="job-title">Prompt Engineer</div>
              <div class="job-company">Anthropic • Remote</div>
              <div class="job-salary">$120k-180k</div>
            </div>
          </div>
        </div>
        
        <div class="sidebar-widget">
          <div class="widget-header">
            <h3>🔥 Hot Deals</h3>
            <a href="/deals" class="view-all-link">View All</a>
          </div>
          <div class="sidebar-deals" id="sidebar-deals">
            <div class="sidebar-deal-item">
              <div class="deal-title">Claude Pro 50% Off</div>
              <div class="deal-discount">50% OFF</div>
              <div class="deal-price">$10 <span class="original-price">$20</span></div>
            </div>
            <div class="sidebar-deal-item">
              <div class="deal-title">ChatGPT Plus 3 Months Free</div>
              <div class="deal-discount">3 MONTHS FREE</div>
              <div class="deal-price">$180 <span class="original-price">$240</span></div>
            </div>
          </div>
        </div>
        
        <div class="sidebar-widget">
          <h3>🔥 Trending Today</h3>
          <div class="trending-items" id="trending-items">
            <div class="trending-item">🔥 GPT-4 Vision capabilities</div>
            <div class="trending-item">⚡ New Claude 3 features</div>
            <div class="trending-item">🎨 Midjourney v6 released</div>
          </div>
        </div>
      </aside>
    </div>
    
    <script>
      let allFeedItems = [];
      let currentFilter = 'all';
      let currentSort = 'hot';
      let currentUser = null;
      
      function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text || '';
        return div.innerHTML;
      }
      
      // Sample data for content types that don't have API endpoints yet
      function generateSampleContent(type, count = 5) {
        const samples = {
          courses: [
            { name: 'Master ChatGPT Prompting', description: 'Learn advanced prompt engineering techniques', price: 49, level: 'Intermediate' },
            { name: 'AI Art with Midjourney', description: 'Create stunning AI-generated artwork', price: 79, level: 'Beginner' },
            { name: 'Python for AI Development', description: 'Build AI applications with Python', price: 99, level: 'Advanced' }
          ],
          jobs: [
            { title: 'AI Engineer', company: 'OpenAI', location: 'San Francisco', salary: '$150k-200k', type: 'Full-time' },
            { title: 'ML Research Scientist', company: 'Google DeepMind', location: 'London', salary: '£80k-120k', type: 'Full-time' },
            { title: 'Prompt Engineer', company: 'Anthropic', location: 'Remote', salary: '$120k-180k', type: 'Contract' }
          ],
          prompts: [
            { name: 'Blog Writer Pro', description: 'Generate engaging blog posts in any niche', price: 9.99, category: 'Writing' },
            { name: 'Code Reviewer', description: 'Comprehensive code review and optimization', price: 14.99, category: 'Development' },
            { name: 'Marketing Copy Generator', description: 'Create compelling marketing copy', price: 12.99, category: 'Marketing' }
          ],
          deals: [
            { title: 'Claude Pro 50% Off', description: 'Limited time offer on Claude Pro subscription', discount: '50%', originalPrice: 20, newPrice: 10 },
            { title: 'ChatGPT Plus 3 Months Free', description: 'Get 3 months free with annual plan', discount: '3 months free', originalPrice: 240, newPrice: 180 },
            { title: 'Midjourney 30% Student Discount', description: 'Special pricing for students and educators', discount: '30%', originalPrice: 30, newPrice: 21 }
          ],
          news: [
            { title: 'GPT-5 Training Reportedly Complete', description: 'OpenAI reportedly completed training for next-generation model', author: 'AI News Team', category: 'AI Models' },
            { title: 'Google Announces Gemini Ultra 1.5', description: 'Enhanced reasoning capabilities and longer context windows', author: 'Tech Reporter', category: 'Technology' },
          ]
        };
        
        return samples[type]?.slice(0, count) || [];
      }
      
      function filterFeed(filter) {
        currentFilter = filter;
        
        // Update active filter visual state
        document.querySelectorAll('.feed-filter').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
        
        // Filter and render items
        const filtered = filter === 'all' ? allFeedItems : allFeedItems.filter(item => item.type === filter);
        renderFeed(filtered);
      }
      
      function setSortOrder(sort) {
        currentSort = sort;
        
        // Update active sort visual state
        document.querySelectorAll('.sort-tab').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
        
        // Sort and render items
        const sortedItems = [...allFeedItems];
        if (sort === 'new') {
          sortedItems.sort((a, b) => new Date(b.data.createdAt || 0) - new Date(a.data.createdAt || 0));
        } else if (sort === 'top') {
          sortedItems.sort((a, b) => (b.data.votes || 0) - (a.data.votes || 0));
        } else {
          // Hot sorting (default)
          sortedItems.sort((a, b) => (b.data.votes || 0) + Math.random() - (a.data.votes || 0) + Math.random());
        }
        
        renderFeed(currentFilter === 'all' ? sortedItems : sortedItems.filter(item => item.type === currentFilter));
      }
      
      function handleVote(itemId, voteType) {
        console.log(`Vote ${voteType} for item ${itemId}`);
        // Handle voting logic here
      }
      
      function handleBookmark(itemId) {
        console.log(`Bookmark item ${itemId}`);
        // Handle bookmarking logic here
      }
      
      function scrollCarousel(direction) {
        const carousel = document.querySelector('.courses-carousel');
        const scrollAmount = 300;
        carousel.scrollBy({
          left: direction === 'right' ? scrollAmount : -scrollAmount,
          behavior: 'smooth'
        });
      }
      
      function renderFeed(items) {
        const feedContainer = document.getElementById('feed-items');
        if (!items || items.length === 0) {
          feedContainer.innerHTML = '<div class="loading-state">No items found for this filter.</div>';
          return;
        }
        
        const feedHtml = items.map((item, index) => {
          const data = item.data;
          
          if (item.type === 'tools') {
            const logoUrl = data.logoUrl || '/api/placeholder/48/48';
            const votes = data.votes || Math.floor(Math.random() * 100);
            const rating = data.rating || (Math.random() * 2 + 3).toFixed(1);
            
            return `
              <div class="tool-card" data-testid="tool-card-${data.id}">
                <div style="display: flex; align-items: flex-start; gap: 12px;">
                  <img src="${logoUrl}" alt="${escapeHtml(data.name)}" class="tool-logo" onerror="this.style.display='none'">
                  <div style="flex: 1;">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 4px;">
                      <h3 style="font-size: 16px; font-weight: 600; color: #333; margin: 0;">${escapeHtml(data.name)}</h3>
                      <div class="tool-votes">
                        <button onclick="handleVote('${data.id}', 'up')" class="vote-button" data-testid="vote-up-${data.id}">▲</button>
                        <span>${votes}</span>
                        <img src="https://cdn-icons-png.flaticon.com/512/102/102279.png" class="bookmark-icon" onclick="handleBookmark('${data.id}')" data-testid="bookmark-${data.id}">
                      </div>
                    </div>
                    <p style="font-size: 14px; color: #666; line-height: 1.4; margin: 0 0 8px 0;">${escapeHtml(data.description)}</p>
                    <div class="tool-meta">
                      <div class="tool-rating">⭐ ${rating}</div>
                      <span>${escapeHtml(data.category)}</span>
                    </div>
                  </div>
                </div>
              </div>
            `;
          } else if (item.type === 'courses' && index % 6 === 5) {
            // Insert courses carousel every 6 items
            const courseCards = generateSampleContent('courses', 3).map(course => `
              <div class="course-card">
                <div class="course-price">$${course.price}</div>
                <div class="course-title">${escapeHtml(course.name)}</div>
                <div class="course-instructor">${escapeHtml(course.description)}</div>
              </div>
            `).join('');
            
            return `
              <div class="courses-section">
                <div class="courses-header">
                  <h3 class="courses-title">📚 Courses for You</h3>
                </div>
                <div class="courses-carousel">${courseCards}</div>
              </div>
            `;
          } else {
            return `
              <div class="feed-item" data-testid="feed-item-${item.type}-${index}">
                <div class="feed-item-content">
                  <span class="feed-item-type ${item.type}">${item.type.toUpperCase()}</span>
                  <h3 class="feed-item-title">${escapeHtml(data.title || data.name)}</h3>
                  <p class="feed-item-description">${escapeHtml(data.description)}</p>
                  <div class="feed-item-meta">
                    <button onclick="handleVote('${data.id}', 'up')" class="vote-button" data-testid="vote-up-${data.id}">▲ ${data.votes || 0}</button>
                    <span>${data.category || 'General'}</span>
                    <img src="https://cdn-icons-png.flaticon.com/512/102/102279.png" class="bookmark-icon" onclick="handleBookmark('${data.id}')" data-testid="bookmark-${data.id}">
                  </div>
                </div>
              </div>
            `;
          }
        }).join('');
        
        feedContainer.innerHTML = feedHtml;
      }
      
      async function loadFeedData() {
        try {
          document.getElementById('feed-items').innerHTML = '<div class="loading-state">Loading amazing AI tools...</div>';
          
          // Load tools from API
          const toolsResponse = await fetch('/api/tools');
          const tools = await toolsResponse.json();
          
          // Load stats
          const statsResponse = await fetch('/api/stats');
          const stats = await statsResponse.json();
          
          // Update community stats
          document.getElementById('community-stats').innerHTML = `
            <div class="stat-item">
              <span class="stat-number">${stats.toolsCount}</span>
              <span class="stat-label">AI Tools</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">${stats.promptsCount}</span>
              <span class="stat-label">Prompts</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">${stats.coursesCount}</span>
              <span class="stat-label">Courses</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">${stats.jobsCount}</span>
              <span class="stat-label">Jobs</span>
            </div>
          `;
          
          // Process and combine feed items
          allFeedItems = [];
          
          // Only add tools with logos to maintain quality
          tools.filter(tool => tool.logoUrl).forEach(tool => {
            allFeedItems.push({
              type: 'tools',
              data: tool
            });
          });
          
          // Add sample content for other types
          generateSampleContent('prompts', 5).forEach((prompt, index) => {
            allFeedItems.push({
              type: 'prompts',
              data: { ...prompt, id: `prompt-${index}`, votes: Math.floor(Math.random() * 50) }
            });
          });
          
          generateSampleContent('news', 5).forEach((news, index) => {
            allFeedItems.push({
              type: 'news',
              data: { ...news, id: `news-${index}`, votes: Math.floor(Math.random() * 30) }
            });
          });
          
          // Shuffle feed for mixed content experience
          allFeedItems = allFeedItems.sort(() => Math.random() - 0.5);
          
          renderFeed(allFeedItems);
          
        } catch (error) {
          console.error('Failed to load feed data:', error);
          document.getElementById('feed-items').innerHTML = 
            '<div class="loading-state">Failed to load content. Please refresh the page.</div>';
        }
      }
      
      document.addEventListener('DOMContentLoaded', function() {
        // Initialize search
        const searchInput = document.getElementById('search-input');
        if (searchInput) {
          searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            const filtered = allFeedItems.filter(item => 
              (item.data.name && item.data.name.toLowerCase().includes(query)) ||
              (item.data.title && item.data.title.toLowerCase().includes(query)) ||
              (item.data.description && item.data.description.toLowerCase().includes(query))
            );
            renderFeed(filtered);
          });
        }
        
        // Load initial data
        loadFeedData();
      });
      
      // Global functions for onclick handlers
      window.filterFeed = filterFeed;
      window.setSortOrder = setSortOrder;
      window.handleVote = handleVote;
      window.handleBookmark = handleBookmark;
      window.scrollCarousel = scrollCarousel;
    </script>
    <!-- This is a replit script which adds a banner on the top of the page when opened in development mode outside the replit environment -->
    <script type="text/javascript" src="https://replit.com/public/js/replit-dev-banner.js"></script>
  </body>
</html>